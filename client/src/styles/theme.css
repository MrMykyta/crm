/* ========= CORE TOKENS ========= */

/* Базовая шкала REM управляется var(--font-scale)
   -> 1rem = 16px * (font-scale/100)  (ставится в ThemeProvider)
*/
:root {
  /* цветовая база */
  --bg: #0c0f16;
  --text: #e9edff;
  --muted: #aab2d6;

  --card-bg: rgba(16,18,27,.6);
  --card-brd: rgba(255,255,255,.12);
  --input-bg: rgba(10,12,19,.65);
  --shadow: 0 20px 60px rgba(0,0,0,.45);

  /* вспомогательные */
  --shadow-clr: #000;         /* для color-mix в модулях */
  --glass-brd: var(--card-brd); /* единый бордер для “glass” */
  
  --primary-start: #5b7cff;
  --primary-end:   #7a5bff;
  --focus: #85a2ff;

  --bg-gradient: linear-gradient(160deg, #0a0c13 0%, #0e1220 100%);
  --bg-radial-1: radial-gradient(1200px 600px at 10% -10%, #1a1f3a 0%, transparent 60%);
  --bg-radial-2: radial-gradient(800px 400px at 110% 10%, #271a3a 0%, transparent 60%);

  --blob-1: #5b7cff;
  --blob-2: #7a5bff;

  --sidebar-bg: rgba(18,21,33,.52);
  --sidebar-brd: rgba(255,255,255,.12);
  --sidebar-text: #e9edff;
  --sidebar-hover: color-mix(in srgb, var(--primary-start) 12%, transparent);
  --sidebar-active: color-mix(in srgb, var(--primary-start) 18%, transparent);

  --topbar-bg: rgba(16,18,27,.72);
  --topbar-brd: rgba(255,255,255,.12);
  --topbar-text: #e9edff;
  --topbar-input-bg: rgba(10,12,19,.65);

  /* ========= TYPOGRAPHY ========= */
  --font-base: 16px;
  --font-multiplier: 1;

  /* шкала */
  --fs-2xs: calc(0.6875rem * var(--font-multiplier)); /* 11px */
  --fs-xs:  calc(0.75rem * var(--font-multiplier));   /* 12px */
  --fs-sm:  calc(0.875rem * var(--font-multiplier));  /* 14px */
  --fs-md:  calc(1rem * var(--font-multiplier));      /* 16px */
  --fs-lg:  calc(1.125rem * var(--font-multiplier));  /* 18px */
  --fs-xl:  calc(1.25rem * var(--font-multiplier));   /* 20px */
  --fs-2xl: calc(1.375rem * var(--font-multiplier));  /* 22px */
  --fs-3xl: calc(1.75rem * var(--font-multiplier));   /* 28px */

  --lh-tight: 1.1;
  --lh-normal: 1.4;
  --lh-comfy: 1.6;

  --fw-regular: 400;
  --fw-medium:  600;
  --fw-bold:    800;

  /* ========= SPACING ========= */
  --space-1: 0.25rem; /* 4px */
  --space-2: 0.5rem;  /* 8px */
  --space-3: 0.75rem; /* 12px */
  --space-4: 1rem;    /* 16px */
  --space-5: 1.25rem; /* 20px */
  --space-6: 1.5rem;  /* 24px */

  /* ========= RADII ========= */
  --radius-sm: 10px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;      /* добавлено для модалок/крупных карточек */
  --radius-full: 999px;

  /* ========= ELEVATION ========= */
  --elev-1: 0 6px 18px rgba(0,0,0,.28);
  --elev-2: 0 10px 24px color-mix(in srgb, var(--primary-start) 35%, transparent);
  --elev-3: 0 20px 60px rgba(0,0,0,.45);

  /* ========= SIZES / LAYOUT ========= */
  --sidebar-w: 15.5rem;          /* 248px */
  --sidebar-w-collapsed: 4.75rem;/* 76px */
  --topbar-h: 5rem;              /* 64px */
  --icon-box: 40px;              /* базовый квадрат кнопок/аватара в topbar */

  /* ========= ANIMATION ========= */
  --tr-fast: .15s ease;
  --tr-med:  .25s ease;

  /* управляется ThemeProvider */
  --font-scale: 100;
  --glass-blur: 20px;


  --success:        #65f797;    /* сочный зелёный под тёмной темой */
  --success-weak:   color-mix(in srgb, var(--success) 18%, transparent);

  --danger:         #ff665a;    /* мягкий красный */
  --danger-weak:    color-mix(in srgb, var(--danger) 18%, transparent);

  /* для тумблера/индикаторов */
  --switch-track:   color-mix(in srgb, var(--card-bg) 80%, #0000);
  --switch-knob:    #ffffff;


  --deal-green-h: 120;      /* hue (0..360) — зелёный */
  --deal-green-s: 60%;      /* saturation */
  --deal-light-start: 50%;  /* самый светлый */
  --deal-light-end: 20%;    /* самый тёмный */
}

/* LIGHT */
:root[data-theme="light"] {
  --bg: #fdfcf9;
  --text: #2e2e35;
  --muted: #777b85;

  --card-bg: rgba(255, 255, 255, .85);
  --card-brd: rgba(30, 30, 40, .08);
  --input-bg: rgba(255, 255, 255, .95);

  --shadow: 0 16px 40px rgba(180, 150, 120, .15);

  --primary-start: #ff8c5c;
  --primary-end:   #a77bff;
  --focus: #ffb685;

  --bg-gradient: linear-gradient(160deg, #fff8f2 0%, #f9f4ff 100%);
  --bg-radial-1: radial-gradient(1200px 600px at 10% -10%, #ffe1c4 0%, transparent 60%);
  --bg-radial-2: radial-gradient(800px 400px at 110% 10%, #e3d2ff 0%, transparent 60%);

  --sidebar-bg: rgba(255, 255, 255, .82);
  --sidebar-brd: rgba(30, 30, 40, .08);
  --sidebar-text: #2e2e35;
  --sidebar-hover: rgba(255, 154, 115, .10);
  --sidebar-active: rgba(255, 154, 115, .18);

  --topbar-bg: rgba(255, 255, 255, .9);
  --topbar-brd: rgba(30, 30, 40, .08);
  --topbar-text: #2e2e35;
  --topbar-input-bg: rgba(255, 255, 255, .96);

  --glass-blur: 4px;

  --success:        #2ecc71;
  --success-weak:   color-mix(in srgb, var(--success) 18%, transparent);

  --danger:         #ff4d4f;
  --danger-weak:    color-mix(in srgb, var(--danger) 18%, transparent);

  --switch-track:   color-mix(in srgb, #000 6%, #fff);
  --switch-knob:    #ffffff;
}

/* плавная смена темы и остальные утилы остаются как были */
html { font-size: var(--font-base); transition: background .25s ease, color .25s ease; }

/* ========= GLOBAL TYPOGRAPHY UTILS ========= */
.u-text      { font-size: var(--fs-md); line-height: var(--lh-normal); }
.u-muted     { color: var(--muted); }
.u-title     { font-size: var(--fs-lg); font-weight: var(--fw-bold); line-height: var(--lh-tight); }
.u-title-sm  { font-size: var(--fs-md); font-weight: var(--fw-bold); line-height: var(--lh-tight); }
.u-caption   { font-size: var(--fs-xs); color: var(--muted); }
.u-kpi       { font-size: var(--fs-2xl); font-weight: var(--fw-bold); line-height: var(--lh-tight); }

.u-btn       { font-size: var(--fs-sm); font-weight: var(--fw-medium); }
.u-input     { font-size: var(--fs-sm); line-height: var(--lh-normal); }



/* === Light override: Pastel Glow === */
:root[data-theme="light"] .inner {
  background: linear-gradient(180deg, #fff7f2 0%, #fff 100%);
  border: 1px solid rgba(255, 170, 130, .25);
  box-shadow:
    0 16px 36px rgba(255, 140, 100, .14),
    inset 0 1px 0 rgba(255, 255, 255, .65);
}

/* header/footer остаются стеклянными */
:root[data-theme="light"] .header,
:root[data-theme="light"] .footer {
  background: linear-gradient(180deg, rgba(255, 247, 242, .97) 0%, rgba(255,255,255,.92) 100%);
  border-color: rgba(255,170,130,.25);
}

/* ================= INPUTS ================= */
:root[data-theme="light"] input,
:root[data-theme="light"] select,
:root[data-theme="light"] textarea {
  background: rgba(255,255,255,.96);
  border: 1px solid rgba(200,120,90,.35);
  box-shadow: inset 0 1px 2px rgba(0,0,0,.05);
  transition: border-color .15s, box-shadow .15s;
}

/* hover/focus: яркий персиковый акцент */
:root[data-theme="light"] input:hover,
:root[data-theme="light"] select:hover,
:root[data-theme="light"] textarea:hover {
  border-color: rgba(255,140,100,.55);
}

:root[data-theme="light"] input:focus,
:root[data-theme="light"] select:focus,
:root[data-theme="light"] textarea:focus {
  border-color: #ff8c64;
  box-shadow: 0 0 0 3px rgba(255,140,100,.25);
  outline: none;
}

/* label подсвечиваем сильнее */
:root[data-theme="light"] label {
  color: #7a5b55;
}